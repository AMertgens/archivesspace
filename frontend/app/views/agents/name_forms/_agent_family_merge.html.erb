<% define_template "name_family", jsonmodel_definition(:name_family) do |form| %>
  <div class="subrecord-form-fields">
    <h4 class="subrecord-form-heading">
      <%= I18n.t("agent._frontend.section.name") %>
      <label class="append"><%= form.merge_checkbox('append') %><small><%= I18n.t("actions.merge_add") %></small></label>
    </h4>
    <h4 class="subrecord-form-heading">
      <span class="badge badge-info is-authoritive-label"><%= I18n.t("name_family.authorized") %></span>
      <span class="badge badge-info is-display-name-label"><%= I18n.t("name_family.is_display_name") %></span>
    </h4>

    <%= render_aspace_partial :partial => "agents/name_forms/authority_fields_merge", :locals => {:form => form} %>

    <%= form.label_and_merge_select "prefix" %>
    <%= form.label_and_merge_select "family_name" %>
    <%= form.label_and_merge_select "dates" %>
    <%= form.label_and_merge_select "family_type" %>
    <%= form.label_and_merge_select "location" %>
    <%= form.label_and_merge_select "language" %>
    <%= form.label_and_merge_select "script" %>
    <%= form.label_and_merge_select "romanization_enum" %>
    <hr/>
    <%= form.label_and_merge_select "qualifier" %>
    <%= form.label_and_readonly "sort_name" %>
    
    <%= render_aspace_partial :partial => "structured_dates/show", :locals => { :dates => form.obj["use_dates"], :section_title => I18n.t("agent_name.use_dates"), :section_id => "victim_name_use_dates", :heading_size => "h4"} %>

    <%= render_aspace_partial :partial => "agent_parallel_names/show", :locals => { :names => form.obj['parallel_names'], :section_id => "victim_parallel_names_#{rand(100000)}"} %>
  </div>
<% end %>
