source:
  format: csv

# Part 1: Maps headers to schema properties (or handlers)
headers:
  accession_title: accession.title
  accession_number_1: accession.id_0
  accession_number_2: accession.id_1
  accession_number_3: accession.id_2
  accession_number_4: accession.id_3
  accession_accession_date: accession.accession_date
  accession_access_restrictions: accession.access_restrictions
  accession_access_restrictions_note: accession.access_restrictions_note
  accession_acquisition_type: accession.acquisition_type
  accession_condition_description: accession.condition_description
  accession_content_description: accession.content_description
  accession_disposition: accession.disposition
  accession_general_note: accession.general_note
  accession_inventory: accession.inventory
  accession_provenance: accession.provenance
  accession_publish: accession.publish
  accession_resource_type: accession.resource_type
  accession_restrictions_apply: accession.restrictions_apply
  accession_retention_rule: accession.retention_rule
  accession_use_restrictions: accession.use_restrictions
  accession_use_restrictions_note: accession.use_restrictions_note

  accession_cataloged_note: collection_management.cataloged_note 
  accession_processing_hours_total: collection_management.processing_hours_total
  accession_processing_plan: collection_management.processing_plan
  accession_processing_priority: collection_management.processing_priority
  accession_processing_status: collection_management.processing_status
  accession_processing_total_extent: collection_management.processing_total_extent
  accession_processing_total_extent_type: collection_management.processing_total_extent_type
  accession_processors: collection_management.processors
  accession_rights_determined: collection_management.rights_determined
  
  date_1_label: date_1.label
  date_1_expression: date_1.expression
  date_1_begin: date_1.begin
  date_1_end: date_1.end
  date_1_type: date_1.date_type
  
  date_2_label: date_2.label
  date_2_expression: date_2.expression
  date_2_begin: date_2.begin
  date_2_end: date_2.end
  date_2_type: date_2.date_type
  
  extent_type: extent.extent_type
  extent_container_summary: extent.container_summary
  extent_number: extent.number
  
  accession_acknowledgement_sent_date: acknowledgement_sent_event.event_date.expression
  accession_cataloged_date: cataloging_event.event_date.expression
  accession_agreement_sent_date: agreement_sent_event.event_date.expression
  accession_processed_date: processed_event.event_date.expression

# Part 2: Describes incoming records (defaults, etc.)


# Each entry's key is either an aspace schema type OR an alias
# with a 'record_type' attribute. Use this section to set 
# default values, to model semantic record relationships, and
# to store one-line procudures to manipulate incoming data.
# There must be 1 entry for every record type created using
# this crosswalk.

entities: 
  accession:
      defaults:
        condition_description: "Condition Description Required"
        content_description: "Content Description Required"
                       
  collection_management:
    slug: whatever

  date_1:
    record_type: date
    defaults:
      label: other
      begin: "1900"
      end: "2000"
      date_type: "inclusive"
      
  date_2:
    record_type: date
    defaults:
      label: other
      begin: "1900"
      end: "2000"
      date_type: "inclusive"

  extent:
    defaults:
      portion: "whole"
      
  event_date:
    record_type: date
    defaults:
      label: other
      date_type: "single"
      begin: "1900"

  agreement_sent_event:
    record_type: event
    defaults:
      event_type: agreement_sent
    properties:
      linked_records:
        inline: true
        attributes:
          role: 
            default: source
      linked_agents:
        procedure: "|uri| {'role' => 'executing_program', 'ref' => uri}" # maybe create a default unknown agent instead
        default: '/agents/software/1'
  
  acknowledgement_sent_event:
    record_type: event
    defaults:
      event_type: acknowledgement_sent
    properties:
      linked_records:
        inline: true
        attributes:
          role: 
            default: source
      linked_agents:
        procedure: "|uri| {'role' => 'executing_program', 'ref' => uri}" # maybe create a default unknown agent instead
        default: '/agents/software/1'

  cataloging_event:
    record_type: event
    defaults:
      event_type: cataloging
    properties:
      linked_records:
        inline: true
        attributes:
          role: 
            default: source
      linked_agents:
        procedure: "|uri| {'role' => 'executing_program', 'ref' => uri}" # maybe create a default unknown agent instead
        default: '/agents/software/1'

  processed_event:
    record_type: event
    defaults:
      event_type: processed
    properties:
      linked_records:
        inline: true
        attributes:
          role: 
            default: source
      linked_agents:
        procedure: "|uri| {'role' => 'executing_program', 'ref' => uri}" # maybe create a default unknown agent instead
        default: '/agents/software/1'

